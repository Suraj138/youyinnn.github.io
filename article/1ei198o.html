<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="baidu-site-verification" content="l09YSIpJQW" />
    <meta name="referrer" content="origin">
    <title>blog | youyinnn</title>
    <script src="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@latest/myjs/loadscripts.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@latest/myjs/jump-1.4.js"></script> -->
    <link rel="bookmark" href="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@latest/img/favicon.ico" />
    <link rel="icon" href="/img/favicon.ico" type="image/ico"/>
    <link rel="stylesheet" href="/mycss/style.css">

    <script src="/myjs/scriptlist.js"></script>
</head>

<body>

    <ol id="topbar" class="breadcrumb unselectable new_font">
        <p style="color:rgb(214, 214, 214); padding-right: 1rem;">
            <button id="egg" class="egg">🚀</button>&nbsp;&nbsp;&nbsp;&nbsp;&gt;</p>
        <li class="breadcrumb-item">
            <spen id="homebut" href="javaScript:void(0)" class="ah">-home</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="articlesbut" href="javaScript:void(0)" class="ah">-articles</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="scriptbut" href="javaScript:void(0)" class="ah">-scripts</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="todobut" href="javaScript:void(0)" class="ah">-todos</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="resumebut" href="javaScript:void(0)" class="ah">-resume</spen>
        </li>
        <li class="breadcrumb-item dropdown">
            <spen href="javaScript:void(0)" class="ah" role="button" id="friendlinkedbut" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-friends</spen>
            <div id="fldd" class="dropdown-menu" aria-labelledby="friendlinkedbut" style="border-radius: initial;"></div>
        </li>

        <div id="hb" data-toggle="tooltip" data-placement="bottom" title="show/hide TopBar">

        </div>
    </ol>

    <div id="homepage" class="unselectable new_font myhide">
        <div id="homepage-center">
            <div id="slogan">
                <i id="wolf-logo" style="font-style: normal;" class="mr-4">🌑</i><span id="slogan-text"></span>
            </div>
            <div id="homepage-btn">
                <div id="showmore"> &nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp; About Me & This Blog</div>
                <div id="showhacknical"> &nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp; My Github Analysis</div>
                <div id="toarticles"> &nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp; My Tech Articles</div>
            </div>
        </div>
        <div id="ifwrapper" class="hacknical_hide">
            <iframe id="hacknical_github_analysis" frameborder="0"></iframe>
        </div>
    </div>

    <div id="articles_side_panel" class="unselectable myhide new_font">
        <div id="cates_tree_head">Article Categories</div>
        <div id="cates_tree_body"></div>
        <div id="blog_statistic_head">Blog Statistics</div>
        <table id="blog_statistic_body" class="myhide">
            <tbody>
                <tr>
                    <td style="text-align:right">Online:</td>
                    <td style="text-align:left" id="stat_running"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Article:</td>
                    <td style="text-align:left" id="stat_article_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Chars:</td>
                    <td style="text-align:left" id="stat_typein"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Categories:</td>
                    <td style="text-align:left" id="stat_cate_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Tags:</td>
                    <td style="text-align:left" id="stat_tag_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Last update:</td>
                    <td style="text-align:left" id="stat_last_update"></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div id="docpanel" class="myhide new_font">
        <div id="articlesearch" class="input-group">
            <input id="articlesearchtext" type="text" class="form-control" autocomplete="off" placeholder="search with keywords (algolia)">
            <div id="searchprocessbar">
                <div id="spb-out" class="spb-outter-animate"></div>
                <div id="spb-in" class="spb-inner-animate"></div>
            </div>
            <div class="input-group-append">
                <button id="cleanbut" class="btn btn-light" type="button" title="clear search">cls</button>
                <button id="categories" class="btn btn-light" type="button">cates</button>
                <button id="tags" class="btn btn-light" type="button" title="all tags">tags</button>
                <button id="articlesearchbut" class="btn btn-light" type="button" title="search">sch</button>
            </div>
        </div>
        <div id="searchrscount" class="unselectable"></div>
        <div class="tgs myhide" id="all_cates">
            <span style="font-size: 1rem; font-weight: bold ; padding: 6px;">All categories:</span>
            <br>
        </div>
        <div class="tgs myhide" id="all_tags">
            <span style="font-size: 1rem; font-weight: bold ; padding: 6px;">All tags:</span>
            <br>
        </div>
    </div>

    <div id="sidetoccontainer" class="tochide unselectable new_font">
        <div id="block">
            <div id="percent" data-toggle="tooltip" data-placement="bottom" title="return to the top">0%</div>
        </div>
        <div id="sidetoc" class="unselectable markdown-body editormd-preview-container markdown-toc"></div>
    </div>
    <div id="md" class="myhide markdown-body editormd-html-preview">
        
          <h3 id="ab3ddd97">Docker concepts</h3><p>Docker is a platform for developers and sysadmins to <strong>develop, deploy, and run</strong> applications with containers. The use of Linux containers to deploy applications is called <em>containerization</em>. Containers are not new, but their use for easily deploying applications is.</p>
<p>Containerization is increasingly popular because containers are:</p>
<ul>
<li>Flexible: Even the most complex applications can be containerized.</li>
<li>Lightweight: Containers leverage and share the host kernel.</li>
<li>Interchangeable: You can deploy updates and upgrades on-the-fly.</li>
<li>Portable: You can build locally, deploy to the cloud, and run anywhere.</li>
<li>Scalable: You can increase and automatically distribute container replicas.</li>
<li>Stackable: You can stack services vertically and on-the-fly.</li>
</ul>
<blockquote>
<p>优点巨多，这也是为什么开发中vm被container技术迅速淘汰的原因</p>
</blockquote>
<p>
        <div class="_showpic_3f7094f5 showpicbtn">Loading images >></div>
        <img href=https://docs.docker.com/get-started/images/laurel-docker-containers.png class="_pic_3f7094f5 hidepic" picId="3f7094f5"></img>
        <script>
            {
                let imgself3f7094f5s = document.getElementsByClassName('_pic_3f7094f5')
                let showpicbtn3f7094f5s = document.getElementsByClassName('_showpic_3f7094f5')
                let isInViewPortOfTwo3f7094f5 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself3f7094f5s[0].getBoundingClientRect() && imgself3f7094f5s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself3f7094f5s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo3f7094f5)
                            isInViewPortOfTwo3f7094f5 = null
                        }
                        for (el of showpicbtn3f7094f5s) {
                            el.style.display = 'none'
                        }
                    }
                }
                window.addEventListener('scroll', isInViewPortOfTwo3f7094f5)
            }
        </script>
    </p>

          <h4 id="2a8f5be6">Images and containers</h4><p>A container is launched by running an image. An <strong>image</strong> is an executable package that includes everything needed to run an application--the code, a runtime, libraries, environment variables, and configuration files.</p>
<p>A <strong>container</strong> is a runtime instance of an image--what the image becomes in memory when executed (that is, an image with state, or a user process). You can see a list of your running containers with the command, <code>docker ps</code>, just as you would in Linux.</p>
<blockquote>
<p>这里表明了image是一个只读的镜像，包含了运行app所需要的代码/运行库/运行环变量/配置文件</p>
<p>而container是一个运行时的image实例</p>
</blockquote>

          <h4 id="7473e2dc">Containers and virtual machines</h4><p>A <strong>container</strong> runs <em>natively</em> on Linux and shares the kernel of the host machine with other containers. It runs a discrete process, taking no more memory than any other executable, making it lightweight.</p>
<p>By contrast, a <strong>virtual machine</strong> (VM) runs a full-blown “guest” operating system with <em>virtual</em> access to host resources through a hypervisor. In general, VMs provide an environment with more resources than most applications need.</p>
<p>
        <div class="_showpic_7abdf313 showpicbtn">Loading images >></div>
        <img href=https://image.youyinnn.top/img/20181116135034.png class="_pic_7abdf313 hidepic" picId="7abdf313"></img>
        <script>
            {
                let imgself7abdf313s = document.getElementsByClassName('_pic_7abdf313')
                let showpicbtn7abdf313s = document.getElementsByClassName('_showpic_7abdf313')
                let isInViewPortOfTwo7abdf313 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself7abdf313s[0].getBoundingClientRect() && imgself7abdf313s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself7abdf313s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo7abdf313)
                            isInViewPortOfTwo7abdf313 = null
                        }
                        for (el of showpicbtn7abdf313s) {
                            el.style.display = 'none'
                        }
                    }
                }
                window.addEventListener('scroll', isInViewPortOfTwo7abdf313)
            }
        </script>
    </p>

          <h3 id="4c82a657">Setup</h3>
          <h4 id="fcb269bd">Installation</h4><p>For more information, please go to the official site : </p>
<p><a href="https://docs.docker.com/install/linux/docker-ce/centos/#upgrade-docker-ce-1">https://docs.docker.com/install/linux/docker-ce/centos/#upgrade-docker-ce-1</a></p>
<ol>
<li><p>update yum packages</p>
<pre><code class="language-bash">$ sudo yum update</code></pre>
</li>
<li><p>perform the docker installation script(<a href="http://www.docker.org.cn/book/install/install-docker-on-rhel-29.html" title="docker installation reference">reference here</a>)</p>
<pre><code class="language-bash">$ curl -sSL https://get.docker.com/ | sh </code></pre>
<p>if it&#39;s error because the fallowing problem:</p>
<pre><code class="language-ba">Error: Package: docker-ce-17.06.0.ce-1.el7.centos.x86_64 (docker-ce-stable)
           Requires: container-selinux &gt;= 2.9
 You could try using --skip-broken to work around the problem
 You could try running: rpm -Va --nofiles --nodigest</code></pre>
<p>seems like you should update or get your container-selinux before your installation move forward, here is the solution reference on <a href="https://stackoverflow.com/questions/45272827/docker-ce-on-rhel-requires-container-selinux-2-9" title="requires container-selinux">requires container-selinux</a>:</p>
<blockquote>
<p>Installing the Selinux from the Centos repository worked for me: </p>
<ol>
<li>Go to <a href="http://mirror.centos.org/centos/7/extras/x86_64/Packages/">http://mirror.centos.org/centos/7/extras/x86_64/Packages/</a> </li>
<li>Find the latest version for container-selinux i.e. container-selinux-2.21-1.el7.noarch.rpm </li>
<li>Run the following command on your terminal: $ sudo yum install -y <a href="http://mirror.centos.org/centos/7/extras/x86_64/Packages/**Add_current_container-selinux_package_here">http://mirror.centos.org/centos/7/extras/x86_64/Packages/**Add_current_container-selinux_package_here</a>** </li>
<li>The command should looks like the following $ sudo yum install -y <a href="http://mirror.centos.org/centos/7/extras/x86_64/Packages/container-selinux-2.21-1.el7.noarch.rpm">http://mirror.centos.org/centos/7/extras/x86_64/Packages/container-selinux-2.21-1.el7.noarch.rpm</a><br> Note: the container version is constantly being updated, that is why you should look for the latest version in the Centos&#39; repository</li>
</ol>
</blockquote>
<p>for now it may look like:</p>
<pre><code class="language-bash">$ sudo yum install -y http://mirror.centos.org/centos/7/extras/x86_64/Packages/container-selinux-2.55-1.el7.noarch.rpm</code></pre>
<p>then you could try the installation script again and it should be done</p>
</li>
<li><p>start docker service</p>
<pre><code class="language-bash">$ sudo service docker start
[sudo] password for xxx: 
Redirecting to /bin/systemctl start docker.service</code></pre>
</li>
</ol>

          <h4 id="d0adcea9">Verify your installation</h4><pre><code class="language-bash">$ sudo docker run hello-world
Unable to find image &#39;hello-world:latest&#39; locally
latest: Pulling from library/hello-world
d1725b59e92d: Pull complete 
Digest: sha256:0add3ace90ecb4adbf7777e9aacf18357296e799f81cabc9fde470971e499788
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
1. The Docker client contacted the Docker daemon.
2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
   (amd64)
3. The Docker daemon created a new container from that image which runs the
   executable that produces the output you are currently reading.
4. The Docker daemon streamed that output to the Docker client, which sent it
   to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
$ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
https://hub.docker.com/

For more examples and ideas, visit:
https://docs.docker.com/get-started/</code></pre>

          <h3 id="225a4a64">Optional Linux post-installation steps</h3>
          <h4 id="821e35a5">Manage Docker as a non-root user</h4><p>You might trouble with permissions problems like:</p>
<pre><code class="language-bash">$ docker ps
Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.39/containers/json: dial unix /var/run/docker.sock: connect: permission denied</code></pre>
<p>It&#39;s because the Docker daemon binds to a Unix socket instead of a TCP port. By default that Unix socket is owned by the user <code>root</code> and other users can only access it using <code>sudo</code>. The Docker daemon always runs as the <code>root</code> user.</p>
<p>If you don’t want to preface the <code>docker</code> command with <code>sudo</code>, create a Unix group called <code>docker</code> and add users to it. When the Docker daemon starts, it creates a Unix socket accessible by members of the <code>docker</code> group.</p>
<ol>
<li><p>create the docker group:</p>
<pre><code class="language-bash">$ sudo groupadd docker</code></pre>
</li>
<li><p>add your user to the <code>docker</code> group</p>
<pre><code class="language-bash">$ sudo usermod -aG docker $USER</code></pre>
<p>or</p>
<pre><code class="language-bash">$ sudo gpasswd -a $USER docker</code></pre>
</li>
<li><p>update the group</p>
<pre><code class="language-bash">$ newgrp docker</code></pre>
</li>
</ol>
<p>Then you can run docker commands without sudo.</p>

          <h4 id="9a580be3">Configure Docker to start on boot</h4><p>Most current Linux distributions (RHEL, CentOS, Fedora, Ubuntu 16.04 and higher) use <a href="https://docs.docker.com/install/linux/linux-postinstall/#systemd"><code>systemd</code></a> to manage which services start when the system boots. Ubuntu 14.10 and below use <a href="https://docs.docker.com/install/linux/linux-postinstall/#upstart"><code>upstart</code></a>.</p>

          <h5 id="5ceb4e26"><code>systemd</code></h5><pre><code>$ sudo systemctl enable docker</code></pre><p>To disable this behavior, use <code>disable</code> instead.</p>
<pre><code>$ sudo systemctl disable docker</code></pre><p>If you need to add an HTTP Proxy, set a different directory or partition for the Docker runtime files, or make other customizations, see<a href="https://docs.docker.com/engine/admin/systemd/">customize your systemd Docker daemon options</a>.</p>

          <h4 id="59fa05a3">More options</h4><p>Please refer to <a href="https://docs.docker.com/install/linux/linux-postinstall" title="docker post installation options">post-install</a></p>
<p>Congrats and enjoy your journey of docker~</p>
<hr>

    </div>
    <div id="scriptsearcher" class="myhide input-group new_font">
        <input id="searchtext" type="text" class="form-control" placeholder="keywords" autocomplete="off">
        <div class="input-group-append">
            <button id="searchbut" class="btn btn-dark" type="button">Search</button>
        </div>
    </div>

    <div id="bbt" class="myhide new_font">
        <a id="toc" style="display: none;" class="myhide" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="show/hide Toc">Toc</a>
        <a id="gohub" href="#" target="_blank" data-toggle="tooltip" data-placement="bottom" title="view this at github">unuse</a>
    </div>

    <div id="share_png_panel" class="myhide">
        <div id="share_curtain"></div>
        <div id="png_box"></div>
        <button id="share_png_paned_close" class="btn btn-dark">Close</button>
    </div>

</body>

</html>