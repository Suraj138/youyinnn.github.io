<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="baidu-site-verification" content="l09YSIpJQW" />
    <meta name="referrer" content="origin">
    <title>blog | youyinnn</title>
    <script src="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@latest/myjs/loadscripts.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@latest/myjs/jump-1.4.js"></script>
    <link rel="bookmark" href="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@latest/img/favicon.ico" />
    <link rel="icon" href="/img/favicon.ico" type="image/ico"/>
    <link rel="stylesheet" href="/mycss/style.css">

    <script src="/myjs/scriptlist.js"></script>
</head>

<body>

    <ol id="topbar" class="breadcrumb unselectable new_font">
        <p style="color:rgb(214, 214, 214); padding-right: 1rem;">
            <button id="egg" class="egg">🚀</button>&nbsp;&nbsp;&nbsp;&nbsp;&gt;</p>
        <li class="breadcrumb-item">
            <spen id="homebut" href="javaScript:void(0)" class="ah">-home</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="articlesbut" href="javaScript:void(0)" class="ah">-articles</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="scriptbut" href="javaScript:void(0)" class="ah">-scripts</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="todobut" href="javaScript:void(0)" class="ah">-todos</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="resumebut" href="javaScript:void(0)" class="ah">-resume</spen>
        </li>
        <li class="breadcrumb-item dropdown">
            <spen href="javaScript:void(0)" class="ah" role="button" id="friendlinkedbut" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-friends</spen>
            <div id="fldd" class="dropdown-menu" aria-labelledby="friendlinkedbut" style="border-radius: initial;"></div>
        </li>

        <div id="hb" data-toggle="tooltip" data-placement="bottom" title="show/hide TopBar">

        </div>
    </ol>

    <div id="homepage" class="unselectable new_font myhide">
        <div id="homepage-center">
            <div id="slogan">
                <i id="wolf-logo" style="font-style: normal;" class="mr-4">🌑</i><span id="slogan-text"></span>
            </div>
            <div id="homepage-btn">
                <div id="showmore"> &nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp; About Me & This Blog</div>
                <div id="showhacknical"> &nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp; My Github Analysis</div>
                <div id="toarticles"> &nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp; My Tech Articles</div>
            </div>
        </div>
        <div id="ifwrapper" class="hacknical_hide">
            <iframe id="hacknical_github_analysis" frameborder="0"></iframe>
        </div>
    </div>

    <div id="articles_side_panel" class="unselectable myhide new_font">
        <div id="cates_tree_head">Article Categories</div>
        <div id="cates_tree_body"></div>
        <div id="blog_statistic_head">Blog Statistics</div>
        <table id="blog_statistic_body" class="myhide">
            <tbody>
                <tr>
                    <td style="text-align:right">Online:</td>
                    <td style="text-align:left" id="stat_running"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Article:</td>
                    <td style="text-align:left" id="stat_article_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Chars:</td>
                    <td style="text-align:left" id="stat_typein"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Categories:</td>
                    <td style="text-align:left" id="stat_cate_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Tags:</td>
                    <td style="text-align:left" id="stat_tag_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Last update:</td>
                    <td style="text-align:left" id="stat_last_update"></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div id="docpanel" class="myhide new_font">
        <div id="articlesearch" class="input-group">
            <input id="articlesearchtext" type="text" class="form-control" autocomplete="off" placeholder="search with keywords (algolia)">
            <div id="searchprocessbar">
                <div id="spb-out" class="spb-outter-animate"></div>
                <div id="spb-in" class="spb-inner-animate"></div>
            </div>
            <div class="input-group-append">
                <button id="cleanbut" class="btn btn-light" type="button" title="clear search">cls</button>
                <button id="categories" class="btn btn-light" type="button">cates</button>
                <button id="tags" class="btn btn-light" type="button" title="all tags">tags</button>
                <button id="articlesearchbut" class="btn btn-light" type="button" title="search">sch</button>
            </div>
        </div>
        <div id="searchrscount" class="unselectable"></div>
        <div class="tgs myhide" id="all_cates">
            <span style="font-size: 1rem; font-weight: bold ; padding: 6px;">All categories:</span>
            <br>
        </div>
        <div class="tgs myhide" id="all_tags">
            <span style="font-size: 1rem; font-weight: bold ; padding: 6px;">All tags:</span>
            <br>
        </div>
    </div>

    <div id="sidetoccontainer" class="tochide unselectable new_font">
        <div id="block">
            <div id="percent" data-toggle="tooltip" data-placement="bottom" title="return to the top">0%</div>
        </div>
        <div id="sidetoc" class="unselectable markdown-body editormd-preview-container markdown-toc"></div>
    </div>
    <div id="md" class="myhide markdown-body editormd-html-preview">
        
          <h3 id="aa91a04f">Introductions</h3><p>首先Jenkins要吐槽一下，Jenkins的Logo真的是太丑了，虽然很明显是一个管家形象- -</p>
<p>
        <div class="_showpic_ccb54ba7 showpicbtn">Loading images >></div>
        <img href=https://image.youyinnn.top/img/20181119145558.png class="_pic_ccb54ba7 hidepic" picId="ccb54ba7"></img>
        <script>
            {
                let imgselfccb54ba7s = document.getElementsByClassName('_pic_ccb54ba7')
                let showpicbtnccb54ba7s = document.getElementsByClassName('_showpic_ccb54ba7')
                let isInViewPortOfTwoccb54ba7 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgselfccb54ba7s[0].getBoundingClientRect() && imgselfccb54ba7s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgselfccb54ba7s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwoccb54ba7)
                            isInViewPortOfTwoccb54ba7 = null
                        }
                        for (el of showpicbtnccb54ba7s) {
                            el.style.display = 'none'
                        }
                    }
                }
                window.addEventListener('scroll', isInViewPortOfTwoccb54ba7)
            }
        </script>
    </p>
<p>Jenkins的默认UI也有点丑，还不如官网的UI好看</p>
<p>但是不影响这玩意的强大表现</p>

          <h3 id="b65ea435">Installation on CentOS</h3>
          <h4 id="fad00c11">Fetch yum repo</h4><p>Add the Jenkins repository to the yum repos, and install Jenkins from here.</p>
<p>There is also <a href="http://pkg.jenkins-ci.org/redhat-stable/">a LTS YUM repository</a> for the <a href="https://wiki.jenkins.io/display/JENKINS/LTS+Release+Line">LTS Release Line</a></p>
<ul>
<li><code>sudo wget -O /etc/yum.repos.d/jenkins.repo</code> <code>http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo</code></li>
<li><code>sudo rpm --import</code> <code>https://jenkins-ci.org/redhat/jenkins-ci.org.key</code></li>
<li><code>sudo yum install jenkins</code></li>
</ul>

          <h4 id="67e3adb7">Installation of Java</h4><p>Jenkins requires Java in order to run, yet certain distros don&#39;t include this by default. To install the Open Java Development Kit (OpenJDK) run the following:</p>
<pre><code class="language-bash">$ sudo yum install java</code></pre>
<p><strong>Note:</strong> If running CentOS, ensure you follow the <a href="https://wiki.jenkins.io/display/JENKINS/Installing+Jenkins+on+Red+Hat+distributions#InstallingJenkinsonRedHatdistributions-ImportantNoteonCentOSJava">guide below</a>.</p>

          <h4 id="e827ec74">Start/Stop</h4><ul>
<li><code>sudo service jenkins start/stop/restart</code></li>
<li><code>sudo chkconfig jenkins on</code></li>
</ul>
<p><strong>Note:</strong> if you get the following error message, ensure that Java has been installed:</p>
<pre><code class="language-bash">Starting jenkins (via systemctl):  Job `for` jenkins.service failed. See `&#39;systemctl status jenkins.service&#39;` and `&#39;journalctl -xn&#39;` `for` details.[FAILED]</code></pre>

          <h4 id="a361751d">What does this package do?</h4><ul>
<li>Jenkins will be launched as a daemon on startup. See <code>/etc/init.d/jenkins</code> for more details.</li>
<li>The &#39;<code>jenkins</code>&#39; user is created to run this service. If you change this to a different user via the config file, you must change the owner of /var/log/jenkins, /var/lib/jenkins, and /var/cache/jenkins.</li>
<li>Log file will be placed in <code>/var/log/jenkins/jenkins.log</code>. Check this file if you are troubleshooting Jenkins.</li>
<li><code>/etc/sysconfig/jenkins</code> will capture configuration parameters for the launch.</li>
<li>By default, Jenkins listen on port 8080. Access this port with your browser to start configuration.  Note that the built-in firewall may have to be opened to access this port from other computers.  (See <a href="http://www.cyberciti.biz/faq/disable-linux-firewall-under-centos-rhel-fedora/">http://www.cyberciti.biz/faq/disable-linux-firewall-under-centos-rhel-fedora/</a> for instructions how to disable the firewall permanently)</li>
<li>A Jenkins RPM repository is added in <code>/etc/yum.repos.d/jenkins.repo</code></li>
</ul>
<blockquote>
<p><strong>Notice</strong>:</p>
<ul>
<li>可以在<code>/etc/sysconfig/jenkins</code>这个路径下找到Jenkins的配置文件</li>
<li>要在CentOS下支持Jenkins，请不要使用JDK，要安装OpenJDK</li>
</ul>
</blockquote>

          <h4 id="54c0e641">More: change Jenkins run as with root</h4><p>在Jenkins中运行shell脚本经常遇到权限问题，解决起来非常麻烦，我们索性来个终极解决办法，就是给jenkins一个root权限，这样就不会再遇到权限问题了。</p>
<p>1) <code>vim /etc/sysconfig/jenkins</code></p>
<p>2) 找到JENKINS_USER改为 “root”:</p>
<pre><code>JENKINS_USER=&quot;root&quot;</code></pre><p>3)然后更改Jenkins home，webroot和日志的所有权：</p>
<pre><code class="language-bash">$ chown -R root:root /var/lib/jenkins
$ chown -R root:root /var/cache/jenkins
$ chown -R root:root /var/log/jenkins</code></pre>
<p>4).重新启动Jenkins并检查用户是否已被更改</p>
<pre><code class="language-bash">$ service jenkins restart</code></pre>
<p>这样我们就给jenkins设置了root权限，我们再运行shell脚本就不会提示权限问题了。</p>

          <h4 id="db365cd5">Wiki</h4><p><a href="https://wiki.jenkins.io/display/JENKINS/Installing+Jenkins+on+Red+Hat+distributions">https://wiki.jenkins.io/display/JENKINS/Installing+Jenkins+on+Red+Hat+distributions</a></p>

          <h3 id="3c4e040c">Create your first pipline by using github repo as branch source</h3><p>To get started quickly with Pipeline:</p>
<ol>
<li>Copy one of the <a href="https://jenkins.io/doc/pipeline/tour/hello-world/#examples">examples below</a> into your repository and name it <code>Jenkinsfile</code></li>
<li>Click the <strong>New Item</strong> menu within Jenkins </li>
<li>Provide a name for your new item (e.g. <strong>My Pipeline</strong>) and select <strong>Multibranch Pipeline</strong></li>
<li>Click the <strong>Add Source</strong> button, choose the type of repository you want to use and fill in the details.</li>
<li>Click the <strong>Save</strong> button and watch your first Pipeline run!</li>
</ol>
<p>
        <div class="_showpic_9c3a58d0 showpicbtn">Loading images >></div>
        <img href=https://image.youyinnn.top/img/20181119184317.png class="_pic_9c3a58d0 hidepic" picId="9c3a58d0"></img>
        <script>
            {
                let imgself9c3a58d0s = document.getElementsByClassName('_pic_9c3a58d0')
                let showpicbtn9c3a58d0s = document.getElementsByClassName('_showpic_9c3a58d0')
                let isInViewPortOfTwo9c3a58d0 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself9c3a58d0s[0].getBoundingClientRect() && imgself9c3a58d0s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself9c3a58d0s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo9c3a58d0)
                            isInViewPortOfTwo9c3a58d0 = null
                        }
                        for (el of showpicbtn9c3a58d0s) {
                            el.style.display = 'none'
                        }
                    }
                }
                window.addEventListener('scroll', isInViewPortOfTwo9c3a58d0)
            }
        </script>
    </p>
<p>Jinkinsfile:</p>
<pre><code class="language-Jenkinsfile">// Jenkinsfile (Declarative Pipeline)
pipeline {
    agent { docker { image &#39;maven:3.3.3&#39; } }
    stages {
        stage(&#39;build&#39;) {
            steps {
                sh &#39;mvn --version&#39;
            }
        }
    }
}</code></pre>
<p>Then when the pipline is building, you can see the console output at:</p>
<p>
        <div class="_showpic_126c96bd showpicbtn">Loading images >></div>
        <img href=https://image.youyinnn.top/img/20181119185023.png class="_pic_126c96bd hidepic" picId="126c96bd"></img>
        <script>
            {
                let imgself126c96bds = document.getElementsByClassName('_pic_126c96bd')
                let showpicbtn126c96bds = document.getElementsByClassName('_showpic_126c96bd')
                let isInViewPortOfTwo126c96bd = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself126c96bds[0].getBoundingClientRect() && imgself126c96bds[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself126c96bds) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo126c96bd)
                            isInViewPortOfTwo126c96bd = null
                        }
                        for (el of showpicbtn126c96bds) {
                            el.style.display = 'none'
                        }
                    }
                }
                window.addEventListener('scroll', isInViewPortOfTwo126c96bd)
            }
        </script>
    </p>

    </div>
    <div id="scriptsearcher" class="myhide input-group new_font">
        <input id="searchtext" type="text" class="form-control" placeholder="keywords" autocomplete="off">
        <div class="input-group-append">
            <button id="searchbut" class="btn btn-dark" type="button">Search</button>
        </div>
    </div>

    <div id="bbt" class="myhide new_font">
        <a id="toc" style="display: none;" class="myhide" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="show/hide Toc">Toc</a>
        <a id="gohub" href="#" target="_blank" data-toggle="tooltip" data-placement="bottom" title="view this at github">unuse</a>
    </div>

    <div id="share_png_panel" class="myhide">
        <div id="share_curtain"></div>
        <div id="png_box"></div>
        <button id="share_png_paned_close" class="btn btn-dark">Close</button>
    </div>

</body>

</html>