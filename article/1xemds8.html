<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="baidu-site-verification" content="l09YSIpJQW" />
    <meta name="referrer" content="origin">
    <title>blog | youyinnn</title>
    <script src="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/myjs/loadscripts.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/myjs/jump-1.2.js"></script>
    <link rel="bookmark" href="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/img/favicon.ico" />
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/img/favicon.ico" />
    <link rel="stylesheet" href="/mycss/style.css">

    <script src="/resources/resources.js"></script>
    <script src="/myjs/scriptlist.js"></script>
</head>

<body>

    <ol id="topbar" class="breadcrumb unselectable new_font">
        <p style="color:rgb(214, 214, 214); padding-right: 1rem;">
            <button id="egg" class="egg">🚀</button>&nbsp;&nbsp;&nbsp;&nbsp;&gt;</p>
        <li class="breadcrumb-item">
            <spen id="homebut" href="javaScript:void(0)" class="ah">-home</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="articlesbut" href="javaScript:void(0)" class="ah">-articles</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="scriptbut" href="javaScript:void(0)" class="ah">-scripts</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="todobut" href="javaScript:void(0)" class="ah">-todos</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="resumebut" href="javaScript:void(0)" class="ah">-resume</spen>
        </li>
        <li class="breadcrumb-item dropdown">
            <spen href="javaScript:void(0)" class="ah" role="button" id="friendlinkedbut" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-friends</spen>
            <div id="fldd" class="dropdown-menu" aria-labelledby="friendlinkedbut" style="border-radius: initial;"></div>
        </li>

        <div id="hb" data-toggle="tooltip" data-placement="bottom" title="show/hide TopBar">

        </div>
    </ol>

    <div id="homepage" class="unselectable new_font myhide">
        <div id="homepage-center">
            <div id="slogan">
                <i id="wolf-logo" style="font-style: normal;" class="mr-4">🌑</i><span id="slogan-text"></span>
            </div>
            <div id="homepage-btn">
                <div id="showmore"> &nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp; About Me & This Blog</div>
                <div id="showhacknical"> &nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp; My Github Analysis</div>
                <div id="toarticles"> &nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp; My Tech Articles</div>
            </div>
        </div>
        <div id="ifwrapper" class="hacknical_hide">
            <iframe id="hacknical_github_analysis" frameborder="0"></iframe>
        </div>
    </div>

    <div id="articles_side_panel" class="unselectable myhide new_font">
        <div id="cates_tree_head">Article Categories</div>
        <div id="cates_tree_body"></div>
        <div id="blog_statistic_head">Blog Statistics</div>
        <table id="blog_statistic_body" class="myhide">
            <tbody>
                <tr>
                    <td style="text-align:right">Online:</td>
                    <td style="text-align:left" id="stat_running"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Article:</td>
                    <td style="text-align:left" id="stat_article_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Chars:</td>
                    <td style="text-align:left" id="stat_typein"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Categories:</td>
                    <td style="text-align:left" id="stat_cate_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Tags:</td>
                    <td style="text-align:left" id="stat_tag_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Last update:</td>
                    <td style="text-align:left" id="stat_last_update"></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div id="docpanel" class="myhide new_font">
        <div id="articlesearch" class="input-group">
            <input id="articlesearchtext" type="text" class="form-control" autocomplete="off" placeholder="search">
            <div class="input-group-append">
                <button id="cleanbut" class="btn btn-light" type="button" title="clear search">cls</button>
                <button id="categories" class="btn btn-light" type="button">cates</button>
                <button id="tags" class="btn btn-light" type="button" title="all tags">tags</button>
                <button id="articlesearchbut" class="btn btn-light" type="button" title="search">sch</button>
            </div>
        </div>
        <div class="tgs myhide" id="all_cates">
            <span style="font-size: 1rem; font-weight: bold ; padding: 6px;">All categories:</span>
            <br>
        </div>
        <div class="tgs myhide" id="all_tags">
            <span style="font-size: 1rem; font-weight: bold ; padding: 6px;">All tags:</span>
            <br>
        </div>
    </div>

    <div id="sidetoccontainer" class="tochide unselectable new_font">
        <div id="block">
            <div id="percent" data-toggle="tooltip" data-placement="bottom" title="return to the top">0%</div>
        </div>
        <div id="sidetoc" class="unselectable markdown-body editormd-preview-container markdown-toc"></div>
    </div>
    <div id="md" class="myhide markdown-body editormd-html-preview">
        
          <h3>
            <a name="_root-Preface" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Preface
          </h3><p>I can&#39;t get up early recently, and yesterday I suddenly thought about why can&#39;t I use my idle raspberry pi to broadcast TV news every 7:00 a.m and wake me up?</p>
<p>And how am I going to achieve that? There are some factors I should count in:</p>
<ul>
<li>a cron to set timing task at 7:00 a.m;</li>
<li>tools to control the mouse action;</li>
<li>tools to control the volume and the screen&#39;s display (save battery)</li>
</ul>

          <h3>
            <a name="_root-Make the pi connecting to the world" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Make the pi connecting to the world
          </h3><p>There&#39;s a lot of choices for using SSR on Linux os, check  <a href="https://github.com/shadowsocks">here</a>, but many of them were banned and deleted their documents.</p>
<p>Luckily, there still some tutorials showing how to implement it on Linux.  (<a href="%5Bhttps://medium.com/@molimowang/raspberry-pi-shadowsocks-polipo%E5%AE%9E%E7%8E%B0%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91-eae1b7eeb779%5D(https://medium.com/@molimowang/raspberry-pi-shadowsocks-polipo%E5%AE%9E%E7%8E%B0%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91-eae1b7eeb779)">reference1</a><a href="https://my.oschina.net/u/1432769/blog/619651?nocache=1527132335477">reference2</a>)</p>

          <h4>
            <a name="_root-Installation" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Installation
          </h4><p>Require python &gt;2.7</p>
<pre><code class="language-bash">sudo apt-get install python-pip python-m2crypto
sudo pip install shadowsocks</code></pre>

          <h4>
            <a name="_root-Config File" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Config File
          </h4><p>Create a json file somewhere, which is used for both ssserver(server) and sslocal(client):</p>
<pre><code class="language-json">{
    &quot;server&quot;:&quot;my_server_ip&quot;,
    &quot;server_port&quot;:8388,
    &quot;local_address&quot;: &quot;127.0.0.1&quot;,
    &quot;local_port&quot;:1080,
    &quot;password&quot;:&quot;mypassword&quot;,
    &quot;timeout&quot;:300,
    &quot;method&quot;:&quot;aes-256-cfb&quot;,
    &quot;fast_open&quot;: false,
    &quot;workers&quot;: 1
}</code></pre>
<ol>
<li>server: server listening address, set <code>0.0.0.0</code> <strong>if your are using your machine as ssserver</strong></li>
<li>server_port: server listening port, should avoided existing port <strong>if your are using your machine as ssserver</strong></li>
<li>local_address: local listening address, should be  <code>127.0.0.1</code></li>
<li>local_port: local listening port, should avoided existing port</li>
<li>password: your <strong>ss password</strong></li>
<li>timeout: connection timeout, second unit </li>
<li>method: crypto method, by default is: <code>aes-256-cfb</code>, <a href="https://github.com/clowwindy/shadowsocks/wiki/Encryption">more info here</a></li>
<li>workers: process number</li>
</ol>

          <h4>
            <a name="_root-Startup ss server" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Startup ss server
          </h4><pre><code class="language-bash">ssserver -c /etc/shadowsocks.json</code></pre>

          <h4>
            <a name="_root-Startup ss client" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Startup ss client
          </h4><pre><code class="language-bash">sslocal -c /etc/shadowsocks.json</code></pre>

          <h4>
            <a name="_root-Openssl Problem" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Openssl Problem
          </h4><p>For some update reason, you might get this <code>error log</code> while using the commands above:</p>
<pre><code class="language-bash">Traceback (most recent call last):
File &quot;/usr/local/bin/sslocal&quot;, line 9, in 
load_entry_point(&#39;shadowsocks==2.8.2&#39;, &#39;console_scripts&#39;, &#39;sslocal&#39;)()
....
....
....
AttributeError: /usr/local/lib/libcrypto.so.1.1: undefined symbol: EVP_CIPHER_CTX_cleanup</code></pre>
<p>This is because:</p>
<blockquote>
<p><strong>EVP_CIPHER_CTX</strong> was made opaque in OpenSSL 1.1.0. As a result, EVP_CIPHER_CTX_reset() appeared and EVP_CIPHER_CTX_cleanup() disappeared. EVP_CIPHER_CTX_init() remains as an alias for EVP_CIPHER_CTX_reset()</p>
</blockquote>
<p>Reference: <a href="%5Bhttps://floperry.github.io/2019/02/24/2018-06-25-Ubuntu-18.04-%E4%B8%8B%E8%A7%A3%E5%86%B3-shadowsocks-%E6%9C%8D%E5%8A%A1%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98/%5D(https://floperry.github.io/2019/02/24/2018-06-25-Ubuntu-18.04-%E4%B8%8B%E8%A7%A3%E5%86%B3-shadowsocks-%E6%9C%8D%E5%8A%A1%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98/)">here</a></p>
<p>Find <code>/site-packages/shadowsocks/crypto/openssl.py</code> according to your <code>error log</code> and edit it: change all <code>EVP_CIPHER_CTX_cleanup()</code> into  <code>EVP_CIPHER_CTX_reset()</code>, there are two places needed to handle.</p>

          <h4>
            <a name="_root-Proxy" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Proxy
          </h4><p>Since ss client is using SOCKS5 protocol, we can&#39;t use it directly or easily in Linux os as Windows os does, so we have to proxy turn the protocol into HTTP.</p>

          <h5>
            <a name="_root-Polipo" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Polipo
          </h5><p>For quick-start, we can use <a href="https://wiki.archlinux.org/index.php/Polipo">Polipo</a> to achieve that, but it is no longer maintain.</p>
<p>Polipo is a small and fast caching web proxy (a web cache, an HTTP proxy, a proxy server). While Polipo was designed to be used by one person or a small group of people, there is nothing that prevents it from being used by a larger group.</p>
<ul>
<li><p>Installation</p>
<pre><code class="language-bash">  sudo apt-get install polipo</code></pre>
</li>
<li><p>config file：</p>
<pre><code class="language-bash">  sudo nano /etc/polipo/config</code></pre>
<pre><code class="language-bash">  # This file only needs to list configuration variables that deviate
  # from the default values. See /usr/share/doc/polipo/examples/config.sample
  # and &quot;polipo -v&quot; for variables you can tweak and further information.

  logSyslog = falselogFile = /var/log/polipo/polipo.log
  socksParentProxy = &quot;127.0.0.1:1080&quot;
  socksProxyType = socks5
  chunkHighMark = 50331648
  objectHighMark = 16384
  serverMaxSlots = 64
  serverSlots = 16
  serverSlots1 = 32
  proxyAddress = &quot;0.0.0.0&quot;
  proxyPort = 8123</code></pre>
</li>
<li><p>restart Polipo：</p>
<pre><code class="language-bash">  /etc/init.d/polipo restart</code></pre>
</li>
<li><p>set global http proxy for terminal：</p>
<pre><code class="language-bash">  export http_proxy=”127.0.0.1:8123”</code></pre>
<p>  for undo it ：</p>
<pre><code class="language-bash">  unset http_proxy</code></pre>
</li>
<li><p>check if proxy is success:</p>
<pre><code class="language-bash">curl google.com</code></pre>
<p>there will be a response if success.</p>
</li>
</ul>

          <h5>
            <a name="_root-Privoxy" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Privoxy
          </h5><p>For stable proxy, please use <a href="https://wiki.archlinux.org/index.php/Privoxy">Privoxy</a></p>
<p><a href="http://www.privoxy.org/">Privoxy</a> is a filtering proxy for the HTTP protocol, frequently used in combination with <a href="https://wiki.archlinux.org/index.php/Tor">Tor</a>. Privoxy is a web proxy with advanced filtering capabilities for protecting privacy, filtering web page content, managing cookies, controlling access, and removing ads, banners, pop-ups, etc. It supports both stand-alone systems and multi-user networks.</p>
<p><a href="https://www.cnblogs.com/hongdada/p/10787924.html">A tutorials</a></p>

          <h4>
            <a name="_root-Chromium with SwitchyOmega" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Chromium with SwitchyOmega
          </h4><p><a href="https://github.com/FelisCatus/SwitchyOmega/releases">Download</a> and <a href="https://stackoverflow.com/questions/23091526/apps-extensions-and-scripts-cannot-be-added-from-this-website">extract it</a>, open <code>developer mode</code> on <code>chrome://extensions</code> and &quot;Load unpacked&quot;.</p>
<p>New profile and then:</p>
<p><strong>Proxy servers</strong></p>
<table>
<thead>
<tr>
<th>Scheme</th>
<th>Protocol</th>
<th>Server</th>
<th>Port</th>
</tr>
</thead>
<tbody><tr>
<td>(default)</td>
<td>SOCKS5 ▼</td>
<td>127.0.0.1</td>
<td>1080</td>
</tr>
</tbody></table>

          <h3>
            <a name="_root-Implement" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Implement
          </h3><p>As I said before, this task should set as a timing task for displaying tv news every 7:00 a.m.</p>
<p>So firstly, we prepare a script to:</p>
<ol>
<li>open <a href="https://www.cgtn.com/tv">CGTN TV</a> the chromium with command line</li>
<li>mute/unmute the system volume</li>
<li>zoom in the video</li>
</ol>

          <h4>
            <a name="_root-Step 1: tv.sh" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Step 1: tv.sh
          </h4><pre><code class="language-shell">#!/bin/bash
if [ $1 == open ]
then 
    amixer set PCM 0%
    chromium-browser https://www.cgtn.com/tv
fi
if [ $1 == play ]
then 
    amixer set PCM 100%
    python mouse.py
fi</code></pre>
<p>Open <code>bash /../tv.sh open</code> and play <code>bash /../tv.sh play</code></p>

          <h4>
            <a name="_root-Step 2: mouse.py" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Step 2: mouse.py
          </h4><p>Use python code to control the mouse move and click to click the fullscreen button:</p>
<pre><code class="language-bash">sudo pip install PyUserInput</code></pre>
<pre><code class="language-python">from pymouse import PyMouse
m = PyMouse()
x,y = 970, 575
m.move(x,y)
m.click(x,y)</code></pre>

          <h4>
            <a name="_root-Step 3: cron" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Step 3: cron
          </h4><pre><code class="language-bash">DISPLAY=:0
58 6 * * * bash /home/pi/tv.sh open 
00 7 * * * bash /home/pi/tv.sh play</code></pre>
<p>Set crontab by using <code>crontab -e</code> command, and choose your editor for editing crontab config file, then you can use <code>crontab -l</code> to display the config file.</p>
<p>Then restart the cron service  <code>/etc/init.d/cron restart</code>.</p>
<p>A GUI Package for crontab is recommended: <a href="https://github.com/alseambusher/crontab-ui">crontab-gui</a></p>
<p>Please notice that we set env value of <code>DISPLAY</code> at line 1 is because if we want to open and gui app with crontab.</p>

          <h4>
            <a name="_root-More" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            More
          </h4><p>At first, I want to choose BBC News or other foreign News Live websites, but then I realized the quality of the Live stream totally depend on the stability of my SSR source, so I quit using foreign sources and find CGTN.</p>
<p>Now everything are settled, enjoy your morning.</p>

    </div>
    <div id="scriptsearcher" class="myhide input-group new_font">
        <input id="searchtext" type="text" class="form-control" placeholder="keywords" autocomplete="off">
        <div class="input-group-append">
            <button id="searchbut" class="btn btn-dark" type="button">Search</button>
        </div>
    </div>

    <div id="bbt" class="myhide new_font">
        <a id="toc" style="display: none;" class="myhide" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="show/hide Toc">Toc</a>
        <a id="gohub" href="#" target="_blank" data-toggle="tooltip" data-placement="bottom" title="view this at github">unuse</a>
    </div>

    <div id="share_png_panel" class="myhide">
        <div id="share_curtain"></div>
        <div id="png_box"></div>
        <button id="share_png_paned_close" class="btn btn-dark">Close</button>
    </div>

</body>

</html>